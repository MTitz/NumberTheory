\documentclass[a4paper,10pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{longtable}
%\pagestyle{empty}

\frenchspacing

%\textwidth15cm
\textheight23cm\topmargin-10mm
%\evensidemargin-10mm

\setlength{\parindent}{0pt}
\setlength{\parskip}{5pt plus 2pt minus 1pt}

\hyphenation{theory}

\begin{document}
\title{Notes to a Math Puzzle Book}
\author{Martin Titz}
\date{\today}
\maketitle
\tableofcontents

\section{Introduction}
I once have bought the book \cite{Clessa} by J.J.Clessa "Math and Logic Puzzles for PC Enthusiasts" in the reprinted Dover edition and now found time to solve the majority of the so called micropuzzles. These are my collected notes.

Many puzzles can be best solved writing a computer program. In most cases I used the programming language Java, while I used the computer algebra system Mathematica for micropuzzles 25 and 55 to solve the minimization problem respective the polynomial equation of degree 4.

\section{Errata}
The following list is only what I have noticed myself, and is no official list.

\begin{itemize}
\item Micropuzzle 41: First example: Replace $321 = 19+2.1^2$ with $21 = 19 + 2\cdot1^2$
\item Micropuzzle 55: Replace in drawing '20m' with '25m'
\item Solution to micropuzzle 1: Replace 'perimeter of 144' with 'perimeter of 576'
\item Solution to micropuzzle 5: Replace $A0-2$ with $A0=2$
\item Solution to micropuzzle 26: Replace 'school' with 'local'
\item Solution to micropuzzle 35: Replace $80+D=281$ with $80+D=28M$
\item Solution to micropuzzle 54: Replace equation (1) with $x^2+y^2=225$
\item Solution to micropuzzle 54: The square is missing in $(x+y)^2-2xy=225$
\item Solution to micropuzzle 54: Rounding error in result, better $3.781555$
\item Solution to micropuzzle 55: Replace equation (2) with $\frac{1}{a} + \frac{1}{b} = \frac{1}{h}$
\item Solution to micropuzzle 55: In the last sentence it should be 'distance between the walls'
\end{itemize}

\section{Overview}
Some of the Java programs require additional Java source files, either using Permutation.java for iterating through all permutations of a given size or using some number-theoretical algorithms like fast square detection, using an algorithm given in \cite{Cohen}. It is also mentioned when the internal Java class BigInteger is used.

In many cases the Java program solves a slightly more general problem, either by calculating a solution for a more general case than the special value given in the problem or by not only finding the first solution. In several cases the special puzzle problem is the default and other values can be given by command line parameters.

\begin{longtable}[t]{|rl|l|l|} \hline
&Puzzle & Used & Remarks (uses) \\ \hline
 1 & Pythagoras for beginners & C++, Java & NumberTheory.java \\
 2 & Flying the Glasgow shuttle & --- &\\
 3 & A chessboard dilemma & Java &\\
 4 & A palindromic puzzle & Java & \\
 5 & Digital dexterity & Java & BigInteger \\
 6 & A palindromic square & Java &\\
 7 & More perfect squares & Java & (also older version)\\
 8 & A question of logic & (list cases) &\\
 9 & The whole truth and nothing but the truth & (list cases) &\\
10 & Talking turkey & Java &\\
11 & The not-so-perfect square & Java & NumberTheory.java\\
12 & Squaring the cube & Java & Permutation.java\\
13 & A natural mistake & Java &\\
14 & Ten-digit perfect squares & Java &\\
15 & A bad connection &&\\
16 & A numerical traverse & --- &\\
17 & A problem of check-digits & Java &\\
18 & Ceremonial rice pudding & Java & BigInteger \\
19 & Who's who & Java & Permutation.java\\
20 & Word frustration & --- &\\
21 & A positional problem & Java &\\
22 & Generating a specific value & Java & Permutation.java\\
23 & Sums of squares & --- &\\
24 & A very prime word & --- &\\
25 & Fieldcraft & Mathematica &\\
26 & Opening day at the local & (list cases) &\\
27 & A very charitable dilemma & --- &\\
28 & Cows, pigs and horses & (paper and pen) &\\
29 & An exact number of factors & (paper and pen) &\\
30 & Cubes and squares & Java &\\
31 & A question of remainders & Java & NumberTheory.java \\
32 & A problem of prime factors & Java & BigInteger \\
33 & The ladies of the committee & Java &\\
34 & An unusual number & Java &\\
35 & Tadpoles, terrapins, tortoises, and turtles & Java &\\
36 & More cubes and squares & C++, Java & NumberTheory.java \\
37 & Sums of cubes & Java & NumberTheory.java \\
38 & Coconut galore &&\\
39 & More trouble with remainders & C++, Java & (as testcase)\\
40 & Ball-bearing pyramids &&\\
41 & Sums of primes, etc. & Java & NumberTheory.java \\
42 & The numerate marathon runner & Java &\\
43 & Ten-digit primes & Java & NumberTheory.java \\
44 & Approximations & --- &\\
45 & Palindromic cycles & Java & BigInteger \\
46 & Mother and daughter &&\\
47 & A catastrophic puzzle & (Venn diagram) &\\
48 & Susan's perfect man &&\\
49 & An interesting pair of series & Java &\\
50 & Another pyramid problem & Java &\\
51 & A number and its square & Java & Permutation.java \\
52 & A long-winded fraction & --- &\\
53 & An infernal triangle & --- &\\
54 & The ladder and the wall & Java &\\
55 & More ladders and walls & Mathematica &\\
56 & Reflections at a corner & (paper and pen) &\\
57 & The census taker & Java & NumberTheory.java \\
58 & A number crossword & --- &\\
59 & Another number crossword & --- &\\
60 & A series of primes & Java &\\
61 & The hymn board & Java &\\
62 & Three unusual digits & Java &\\
63 & A recurring quotient & Java &\\
64 & A rotating grid & Java & Permutation.java \\
65 & The cocktail party & (paper and pen) &\\
\hline \end{longtable}


\section{Individual Puzzles}

\subsection{Quickie 16}
From the book \cite{Clessa}: Here's a simple multiplication problem in which each letter represents a different digit. Can you solve it?
\begin{verbatim}
    IFx
    AT
  -----
  FIAT
  -----
\end{verbatim}

The book gives only one solution, but as also 0 is a digit, I found three:
\begin{eqnarray*}
21 \cdot 60 &=& 1260\\
41 \cdot 35 &=& 1435\\
51 \cdot 30 &=& 1530
\end{eqnarray*}

\subsection{Quickie 17}
See also \cite{BookOfNumbers}, pages 83-84 for a more general treatment. There the general formula for the total number of triangles is given when the big triangle sides each consist of $n$ small triangles (sequence 0, 1, 5, 13, 27, 48, 78, 118, 170,\ldots, M3827 in \cite{Integer_sequences}).
\begin{eqnarray*}
\frac{n(n+2)(2n+1)}{8} &\quad& \mbox{for even n}\\
\frac{n(n+2)(2n+1)-1}{8} &\quad& \mbox{for odd n}
\end {eqnarray*}
It is derived in \cite{BookOfNumbers} from a difference pattern, but not proofed for general $n$.



%\subsection{Micropuzzle 1 -- Pythagoras for beginners}
% \cite{HardyWright} \cite{CRCTablesFormulae}



\subsection{Micropuzzle 5 -- Digital dexterity}
From the book \cite{Clessa}: ``A certain number ends in the digit 'a'. When the 'a' is taken from the end of the number and placed at the beginning, a new number is formed which is 'a' times the original number.''

The problem can be solved more general for an arbitrary base $B$ for the number system instead of only base 10.

A positive integer $N$ can be represented in a number system with base $B \ge 2$ with $n$ digits $ 0 \le d_i \le B-1 $ for $i=0,\ldots,n-1$

\begin{equation}
N = \sum_{i=0}^{n-1}d_i B^i
\end{equation}

Let $d_0 \in \left\{2, 3, \cdots, B-1\right\}$. The case of $d_0 = 1$ is trivial, already $N=1$ would be a solution.

Taking away the last digit $d_0$ of the number $N$ can be expressed as first subtracting $d_0$ from $N$ and as then the number ends with a $0$ in base $B$, dividing by the base. Adding the digit $d_0$ then in front is just adding $d_0 B^{n-1}$ to the remaining number. As by condition of the puzzle this has to be equal $d_0$ times the original number $N$, the following equations results

\begin{equation}
d_0 \cdot N = d_0 B^{n-1} + \frac{N-d_0}{B}
\end{equation}

Multiplying both sides with $B$
\begin{displaymath}
B d_0 N = d_0 B^n + N-d_0
\end{displaymath}
and sorting all terms with $N$ to the left side and the other ones to the right side yields
\begin{displaymath}
\left(B d_0 -1\right) N = d_0 \left(B^n - 1\right)
\end{displaymath}

As $d_0$ is an integer $\ge 2$, the two integers $B d_0-1$ and $d_0$ cannot have a common divisor, therefore $B d_0-1$ must be a divisor of the other factor on the right side, therefore it must be
\begin{equation} \label{divCond}
\left(B d_0 -1\right) | \left(B^n - 1\right)
\end{equation}
and if this condition is fulfilled for a given $n$ then the original number $N$ can be calculated by
\begin{equation} \label{Ndivision}
N = \frac{d_0\cdot\left(B^n-1\right)}{B d_0-1}
\end{equation}

To find the smallest $n$ that condition (\ref{divCond}) is fulfilled you can check
\begin{equation} \label{modCond}
B^n \equiv 1 \pmod{B d_0 -1}
\end{equation}
as this can be efficiently calculated, see for example \cite{Giblin}, section 4.2.

With this, the solution of the puzzle can be done in the following two steps:

\begin{enumerate}
\item Find the smallest $n$ that fulfills (\ref{modCond}) using a powerMod algorithm.
\item Calculate $N$ by the division (\ref{Ndivision}), using high precision integer arithmetic as the powers $B^n$ will soon become huge numbers well out of the range of normal integer arithmetic with int or long data types.
\end{enumerate}

\underline{Example 1:} $B=10$, $d_0=4$: Here is $Bd_0-1=39$ and as the smallest exponent to be found is $n=6$ for which $39|\left(10^6-1\right)$, hence
\[
N = \frac{4 \cdot \left(10^6-1\right)}{39} = \frac{4 \cdot 999999}{39} = 102564
\]
Therefore \[4\cdot102564=410256\]

\underline{Example 2:} $B=4, d_0=2$: Here is $Bd_0-1=7$ and $7|\left(4^3-1\right)$, hence
\[
N = \frac{2 \cdot \left(4^3-1\right)}{7} = \frac{2 \cdot 63}{7} = 18
\]
Therefore \[2 \cdot\left(102\right)_4 = \left(210\right)_4 \]

For verification it is
\begin{eqnarray*}
 \left(102\right)_4 &=& 1\cdot4^2+0\cdot4^1+2\cdot4^0 = 16+2 = 18\\
 \left(210\right)_4 &=& 2\cdot4^2+1\cdot4^1+0\cdot4^0 = 32+4 = 36
\end{eqnarray*}



\pagebreak
\subsection{Micropuzzle 7 -- More perfect squares}
From the book \cite{Clessa}:
``Find the smallest perfect square that is also the average of two other perfect squares. In other words, find three perfect squares $A$, $B$, and $C$ such that
\begin{equation} \label{m7_mean}
B = (A+C) / 2.
\end{equation}
Oh yes, one other stipulation to curtail all the smart-alecs:
$A$, $B$, and $C$ may not be equal.''

Without loss of generality it can be assumed $A < B < C$.

As the numbers are perfect squares there exist nonnegative integers $a$, $b$ and $c$ so that $A = a^2$, $B = b^2$, $C = c^2$, and $0 \le a < b < c$.

Inserting this into (\ref{m7_mean}) and multiplying both sides with 2 gives the condition
\begin{equation} \label{m7_condition}
2b^2 = a^2 + c^2
\end{equation}

A primitive solution is one where the numbers $a$, $b$ and $c$ do not have a common divisor. The general solutions can be obtained by multiplying all three numbers of a primitive solution by the same positive integer $d$.

From now on it is looked only for primitive solutions, therefore $a$, $b$ and $c$ have to be numbers without a common prime factor.

If $a$ and $c$ are both even, $a^2$ and $c^2$ are multiples of 4, therefore also their sum and by (\ref{m7_condition}) also $2b^2$ is a multiple of 4, hence $b^2$ is a multiple of 2 and therefore it is an even number. This is only possible with $b$ itself an even number, thus having a factor of 2. As all three numbers then would have a common factor of 2, this cannot be for a primitive solution.

If one of $a$ and $c$ is even and one odd, it is also one of $a^2$ and $c^2$ odd and one even, thus $a^2+c^2$ is an odd number, which is not possible as the left side of (\ref{m7_condition}) is an even number. Therefore this case cannot happen.

Therefore both $a$ and $c$ must be odd numbers for any primitive solution. As sum and difference of two odd numbers are even numbers, both $a+c$ and $c-a$ are even numbers.
Hence the numbers
\begin{equation} \label{n_and_m}
n = \frac{c+a}{2},\qquad m = \frac{c-a}{2}
\end{equation}
are both positive integers. It is
\begin{eqnarray*}
n^2 + m^2 &=& \left(\frac{c+a}{2}\right)^2 + \left(\frac{c-a}{2}\right)^2 \\
          &=& \frac{1}{4}\left( (c+a)^2 + (c-a)^2 \right) \\
          &=& \frac{1}{4}\left( c^2+2ac+a^2 + c^2-2ac+a^2 \right) \\
          &=& \frac{1}{4}\left( 2a^2 + 2c^2 \right) \\
          &=& \frac{1}{2}\left(a^2 + c^2\right) \\
          &=& b^2
\end{eqnarray*}
and so the triple $(n,m,b)$ must be a triple of Pythagorean numbers.

Multiplying both sides of the equations in (\ref{n_and_m}) by 2 gives
\[ 2n = c+a,\qquad 2m = c-a \]
and
\begin{equation} \label{a_and_b}
a = n-m,\qquad c = n+m
\end{equation}

This way you can take any primitive Pythagorean triple $(m,n,b)$ with $m<n<b$ and generate from it using (\ref{a_and_b}) a solution triple $(a,b,c)$ for (\ref{m7_condition}).

%If $n \equiv 0 \pmod{2}$ then $n^2 \equiv 0 \pmod{4}$ for any integer $n$.

\underline{Example:} A well-known Pythagorean triple is $(3,4,5)$ because $3^2 + 4^2 = 5^2$.
Here it is $m=3$, $n=4$ and $b=5$ and by (\ref{a_and_b}) it follows $a=4-3=1$ and $c=4+3=7$.
Therefore it is $A=1^2=1$, $B=5^2=25$, $C=7^2=49$ a solution of the equation (\ref{m7_mean}).

A table with the first primitive solutions ordered by increasing $B$:
\begin{table}[htbp]
\begin{tabular}{|r@{ = }r|r@{ = }r|r@{ = }r|r|} \hline
$A$&$a^2$ & $B$&$b^2$ & $C$&$c^2$ & difference \\
\hline
$    1$ & $   1^2 $ & $   25$ & $   5^2 $ & $    49$ & $   7^2 $ &   24 \\
$   49$ & $   7^2 $ & $  169$ & $  13^2 $ & $   289$ & $  17^2 $ &  120 \\
$   49$ & $   7^2 $ & $  289$ & $  17^2 $ & $   529$ & $  23^2 $ &  240 \\
$  289$ & $  17^2 $ & $  625$ & $  25^2 $ & $   961$ & $  31^2 $ &  336 \\
$    1$ & $   1^2 $ & $  841$ & $  29^2 $ & $  1681$ & $  41^2 $ &  840 \\
$  529$ & $  23^2 $ & $ 1369$ & $  37^2 $ & $  2209$ & $  47^2 $ &  840 \\
$  961$ & $  31^2 $ & $ 1681$ & $  41^2 $ & $  2401$ & $  49^2 $ &  720 \\
$  289$ & $  17^2 $ & $ 2809$ & $  53^2 $ & $  5329$ & $  73^2 $ & 2520 \\
$ 2401$ & $  49^2 $ & $ 3721$ & $  61^2 $ & $  5041$ & $  71^2 $ & 1320 \\
$ 2209$ & $  47^2 $ & $ 4225$ & $  65^2 $ & $  6241$ & $  79^2 $ & 2016 \\
$  529$ & $  23^2 $ & $ 4225$ & $  65^2 $ & $  7921$ & $  89^2 $ & 3696 \\
$   49$ & $   7^2 $ & $ 5329$ & $  73^2 $ & $ 10609$ & $ 103^2 $ & 5280 \\
$ 5041$ & $  71^2 $ & $ 7225$ & $  85^2 $ & $  9409$ & $  97^2 $ & 2184 \\
$ 1681$ & $  41^2 $ & $ 7225$ & $  85^2 $ & $ 12769$ & $ 113^2 $ & 5544 \\
$ 1681$ & $  41^2 $ & $ 7921$ & $  89^2 $ & $ 14161$ & $ 119^2 $ & 6240 \\
$   49$ & $   7^2 $ & $ 9409$ & $  97^2 $ & $ 18769$ & $ 137^2 $ & 9360 \\
%$ 6241$ & $  79^2 $ & $10201$ & $ 101^2 $ & $ 14161$ & $ 119^2 $ & 3960 \\
%$  961$ & $  31^2 $ & $11881$ & $ 109^2 $ & $ 22801$ & $ 151^2 $ &10920 \\
%$ 9409$ & $  97^2 $ & $12769$ & $ 113^2 $ & $ 16129$ & $ 127^2 $ & 3360 \\
%$ 5329$ & $  73^2 $ & $15625$ & $ 125^2 $ & $ 25921$ & $ 161^2 $ &10296 \\
%$  289$ & $  17^2 $ & $18769$ & $ 137^2 $ & $ 37249$ & $ 193^2 $ &18480 \\
\hline \end{tabular}
\end{table}

\subsection{Micropuzzle 11 -- The not-so-perfect square}
From the book \cite{Clessa}: ``A certain perfect square has the property that, if 5 is added to it, a second perfect square is obtained, and if 5 is subtracted from it, a third perfect square is obtained.

What is the original perfect square?''


It is $3^2-2^2=9-4=5$, but there are no other perfect squares within the integers that have the same difference, therefore there does not exist any solution within the integers.

Let $\left(\frac{a}{d}\right)^2$ be this certain perfect square as a fraction, then we need to find a sequence of three fractions
\[ \left(\frac{a}{d}\right)^2-5,\quad \left(\frac{a}{d}\right)^2,\quad \left(\frac{a}{d}\right)^2+5 \]
where also the first and the third number are perfect squares.

Multiplying all numbers by $d^2$ we get
\[ a^2-5d^2,\quad a^2,\quad a^2+5d^2 \]
where $a^2-5d^2$ and $a^2+5d^2$ must be perfect squares within the integers.

As it has to be $a^2-5d^2 > 0$ it must be $d < a / \sqrt{5}$.




\pagebreak

\subsection{Micropuzzle 13 -- A natural mistake}
The woman is buying 4 items with prices $p_1, p_2, p_3, p_4$ that must fulfill the two conditions
\begin{eqnarray*}
 p_1 + p_2 + p_3 + p_4 = 7.11 \\
 p_1 \cdot p_2 \cdot p_3 \cdot p_4 = 7.11 \\
\end{eqnarray*}
It will be easier to transform these equations so further calculations will be done only within integers.

The British currency had many changes over time. The puzzles had been stated after the decimalization of the British coinage 1971, but at the time the puzzle had been first published, the halfpenny had still been legal tender. Therefore the variables $a$, $b$, $c$ and $d$ give the prices of the four items in halfpennies; a halfpenny had been at that time $1/200$ of a pound.

We have to look for solutions in positive integers of the equations
\begin{eqnarray*}
\frac{a}{200} + \frac{b}{200} + \frac{c}{200} + \frac{d}{200} &=& \frac{711}{100} \\
\frac{a}{200}\cdot\frac{b}{200}\cdot\frac{c}{200}\cdot\frac{d}{200} &=& \frac{711}{100}
\end{eqnarray*}

Multiplying the first equation with $200$ and the second one with $200^4$ gives
\begin{eqnarray*}
a + b + c + d &=& 1422\\
a \cdot b \cdot c \cdot d &=& 1422 \cdot 200^3 = 11\,376\,000\,000
\end{eqnarray*}

Without loss of generality we can assume $a \ge b \ge c \ge d$.

I then got the three possible solutions with a small Java program with three nested loops, as the value of the fourth variable is then determined by the first equation. If you want to try to solve the the problem without programming, you could use that the variables need to be divisors of $1422 \cdot 200^3$.

The solutions are
\begin{table}[htbp]
\begin{tabular}{|c|c|c|c|} \hline
 a & b & c & d \\ \hline
 625 & 316 & 256 & 225 \\
 625 & 320 & 240 & 237 \\
 632 & 300 & 250 & 240 \\ \hline
\end{tabular}
\end{table}

and so the possible prices are in pounds
\begin{table}[htbp]
\begin{tabular}{|c|c|c|c|} \hline
 $p_1$ & $p_2$ & $p_3$ & $p_4$ \\ \hline
 3.125 & 1.580 & 1.280 & 1.125 \\
 3.125 & 1.600 & 1.200 & 1.185 \\
 3.160 & 1.500 & 1.250 & 1.200 \\ \hline
\end{tabular}
\end{table}

The last solution is the only one that does not require usage of halfpenny coinage.



\subsection{Micropuzzle 14 -- Ten-digit perfect squares}
The program Micropuzzle14.java is more general than the exercise, allowing to give the number of digits as command line parameter. As the Java type long is used for the calculation, a maximum of 18 digits is possible.

Nice individual results for square numbers with the most fours within 5 to 8 decimal digits:
\begin{eqnarray*}
 212^2 &=&    44944 \\
 738^2 &=&   544644 \\
2538^2 &=&  6441444 \\
6888^2 &=& 47444544
\end{eqnarray*}
In the first result both numbers are additionally palindromic numbers.

The result of my program for the puzzle with 10 digits is
\begin{verbatim}
Record table for 10 digits, range from 1000000000 to 9999999999

 0   8      40000         1600000000
 1   6      33183         1101111489
 2   6      35415         1254222225
 3   6      57735         3333330225
 4   7      66592         4434494464
 5   6      67495         4555575025
 6   6      68313         4666665969
 7   6      88924         7907477776
 8   6      61878         3828886884
 9   6      53937         2909199969
\end{verbatim}

The first column gives the digit that is looked for, the second column how often it occurs in the number, the third the number to be squared to get the number in the fourth column.



\subsection{Micropuzzle 25 -- Fieldcraft}
The fastest time is achieved when walking in straight lines across the different types of soil. Let $s_1, s_2, s_3$ be the distances on each kind of surface.

Let $x_1$ the horizontal distance to the point where the farmer leaves from bog to ploughed soil and $x_2$ the horizontal distance to the point where the farmer passes over from ploughed soil to turf.

Then by theorem of Pythagoras

\begin{eqnarray*}
s_1 &=& \sqrt{x_1^2+100^2}\\
s_2 &=& \sqrt{(x_2-x_1)^2+200^2}\\
s_3 &=& \sqrt{(600-x_2)^2+300^2}
\end{eqnarray*}

Using $v = s/t$ in the form $t = s/v$ the total walking time becomes with $v_1=5/2$, $v_2=5$ and $v_3=10$
\begin{equation}
t\left(x_1,x_2\right) = \sum_{k=1}^3\frac{s_k\left(x_1,x_2\right)}{v_k}
\end{equation}

Therefore the function
\begin{equation}
t\left(x_1,x_2\right) = \frac{2}{5}\sqrt{x_1^2+100^2} + \frac{1}{5}\sqrt{(x_2-x_1)^2+200^2} + \frac{1}{10}\sqrt{(600-x_2)^2+300^2}
\end{equation}
has to be minimized with the constraints $0 \le x_1 \le x_2 \le 600$.

The minimum calculated by the Mathematica function NMinimize is
\begin{eqnarray*}
x_1 &\approx&  21.75005975313918566355364915123672639489\\
x_2 &\approx& 115.6697035828699592291918422393758246010\\
t\left(x_1,x_2\right) &\approx& 142.0976590441970400672455501877239343250
\end{eqnarray*}

The shortest time rounded to the nearest second is 2 minutes 22 seconds. The high precision is not needed for the puzzle answer, but could be useful as reference value for checking another implementation of this problem.

\subsection{Micropuzzle 35 -- Tadpoles, terrapins, tortoises, and turtles}
To only use integers the prices are in pence for the calculation.
Then using $a$, $b$, $c$ and $d$ for the numbers of each kind these two equations arise:
\begin{eqnarray}
59a+199b+287c+344d &=& 10000 \label{animals1}\\
 a + b + c + d &=& 100 \label{animals2}
\end{eqnarray}
Multiplying (\ref{animals2}) with 59 and then subtracting this
from the equation (\ref{animals1}) results in
\[ (59-59)a + (199-59)b + (287-59)c + (344-59)d = 10000 - 59 \cdot 100\]
and simplified
\begin{equation} \label{animals3}
140b + 228c + 285d = 4100
\end{equation}

The simple solution program Micropuzzle35.java varies the values of $b$ and $c$ in the expression given by the left side of (\ref{animals3}) in the range from 0 to 4100.
If then $d$ would be an integer, $d$ is calculated from (\ref{animals3}) and finally $a = 100-b-c-d$ can be calculated and a solution is found.

Also the solution can be found without writing a computer program. One good analytical approach for such problems is demonstrated in the solution of the book \cite{Clessa}.

Another way to solve it is the following:

Looking into equation (\ref{animals3}) you can see that all the numbers 140, 228 and 4100 are divisible by 4, thus are also $140b$ and $228c$ divisible by 4. Therefore $285d$ must be divisible by 4 too, and therefore $4|d$, so it exists a nonnegative integer $d'$ with
\[ d = 4 d' \]
and putting this into (\ref{animals3}) it becomes
\[ 140b + 228c + 285 \cdot 4d' = 4100 \]
and dividing both sides by 4 we get
\begin{equation} \label{animals4}
 35b + 57c + 285d' = 1025
\end{equation}

As now the numbers 35, 285 and 1025 all contain the common factor of 5, also $57c$ most be a multiple of 5, and therefore it exists a nonnegative integer $c'$ so that
\[ c = 5 c' \]
and the equation (\ref{animals4}) becomes
\[ 35b + 57 \cdot 5c' + 285d' = 1025 \]
and dividing both sides by 5 it simplifies to
\begin{equation} \label{animals5}
 7b + 57c' + 57d' = 205
\end{equation}
As it is $7b = 205 - 57(c'+d')$ we can now check
\begin{eqnarray*}
205 - 0 \cdot 57 &=& 7\cdot 29 + 2 \\
205 - 1 \cdot 57 &=& 7\cdot 21 + 1 \\
205 - 2 \cdot 57 &=& 7\cdot 13 \\
205 - 3 \cdot 57 &=& 7\cdot 4 + 6 \\
205 - 4 \cdot 57 &<& 0
\end{eqnarray*}
Therefore it must be for any possible solution
\[ b = 13 \]
and by equation (\ref{animals5}) it follows
\[ c'+d' = 2. \]
So the cases $c'=0, d'=2$, $c'=1, d'=1$ and $c'=2, d'=0$ have to be checked, and each gives indeed a solution of the problem, with only the middle one having all four animals present.

Therefore we have these three solutions of the problem
\begin{table}[htbp]
\begin{tabular}{|r|r|r|r|} \hline
 $a$ & $b$ & $c$ & $d$ \\ \hline
 79  & 13  &  0  & 8 \\
 78  & 13  &  5  & 4 \\
 77  & 13  & 10  & 0 \\ \hline
\end{tabular}
\end{table}



\subsection{Micropuzzle 45 -- Palindromic cycles}
The actual puzzle solution for only two digit numbers could have been done within the range of the long Java data type. But the interesting cases are beyond this range.

It is still an open problem if these cycles ever terminate for the number 196 and likewise for many numbers above 196, while the record of 24 cycles for 89 and 98 for known terminating cycles is only first exceeded beyond $10\,000$, as the number $10\,548$ reaches after 30 cycles the palindrome $17\,858\,768\,886\,785\,871$. Therefore the solution program Micropuzzle45.java follows cycles only until a given limit of 1000 cycles and lists these exceptional cases at the end of its output.


\subsection{Micropuzzle 54 -- The ladder and the wall}
Let the distance from floor to top of the ladder be $x$ feet.\\
Let the distance from wall to bottom of ladder be $y$ feet.

Then by theorem of Pythagoras
\begin{equation}\label{ladderp}
x^2+y^2=15^2
\end{equation}
and by the two similar triangles above and right of the box (all angles are equal)
\begin{equation}\label{laddersimilar}
\frac{x-3}{3} = \frac{3}{y-3}
\end{equation}
Multiplying both sides of (\ref{laddersimilar}) with the denominators gives
\[(x-3)(y-3) = 9\]
\[xy-3x-3y+9 = 9\]
\begin{equation}\label{ladders2}
xy = 3(x+y)
\end{equation}

By the binomial theorem
\[(x+y)^2 = x^2 + 2xy + y^2 \]
it is
\[ x^2 + y^2 = (x+y)^2 - 2xy \]
Inserting this into (\ref{ladderp}) gives together with (\ref{ladders2}) an equation system
\begin{equation}
(x+y)^2 - 2xy = 15^2
\end{equation}
\begin{equation}
xy = 3 (x+y)
\end{equation}
where the variables $x$ and $y$ only appear in the forms $x+y$ and $xy$. This suggests the substitutions
\begin{equation}\label{ladderSubst}
u = x+y,\qquad v = xy
\end{equation}
resulting in the equation system for $u$ and $v$
\begin{eqnarray}
u^2 - 2v &=& 15^2\\
v &=& 3u \label{vu_relation}
\end{eqnarray}
Inserting the expression for $v$ from the second equation into the first one obtains the quadratic equation
\[
u^2 - 6u -15^2 = 0
\]
with the two solutions
\[ u_{1,2} = 3 \pm \sqrt{3^2+15^2} = 3 \pm 3 \sqrt{1^2+5^2} = 3 \left( 1 \pm \sqrt{26}\right) \]
Because $u = x+y > 0$ only the positive solution matters, so it must be
\[ u = 3 \left(1+ \sqrt{26}\right) \]
and by (\ref{vu_relation})
\[ v = 3u = 9\left(1 + \sqrt{26}\right) \]

Using as shortcut
\[R = 1+\sqrt{26} \]
and inserting the values of $u$ and $v$ into (\ref{ladderSubst}) the equations for $x$ and $y$ become
\begin{eqnarray*}
x+y &=& 3R\\
xy &=& 9R
\end{eqnarray*}
By the second equation it is $y = 9R / x$, inserting this into the first equation obtains another quadratic equation, now for $x$
\[ x + \frac{9R}{x} = 3R \]
or
\[ x^2 - 3R x + 9R = 0 \]
with the solution
\begin{eqnarray*}
x_{1,2} &=& \frac{3}{2}R \pm \sqrt{\frac{9}{4}R^2-9R} \\
        &=& \frac{3}{2}\left(R \pm \sqrt{R^2-4R}\right) \\
        &=& \frac{3}{2}\left(R \pm \sqrt{R(R-4)}\right)
\end{eqnarray*}

This gives the two possible solutions
\begin{eqnarray*}
x_1 &\approx& 14.515503482069 \\
x_2 &\approx& 3.781555058710
\end{eqnarray*}

The distance between top of the wall and top of the ladder then becomes $15-x_{1,2}$ giving the two solutions of 0.4844965 feet or 11.2184449 feet.



\subsection{Micropuzzle 55 -- More ladders and walls}
Let $a$ be the height at which the longer ladder of 30m rests against the right wall and $b$ the height where the 25m ladder leans at the other wall, $d$ the distance between the two walls we look for and for convenience let $h=\frac{504}{100}$ the height of the meeting point of the two ladders over the ground.

By the theorem of Pythagoras we have

\begin{eqnarray}
a^2 + d^2 &=& 30^2 \label{ladderpyth1}\\
b^2 + d^2 &=& 25^2 \label{ladderpyth2}
\end{eqnarray}
This gives  $d^2 = 30^2-a^2$ and $d^2=25^2-b^2$, hence
\[ 30^2-a^2 = 25^2-b^2\]
or by adding $a^2-25^2$ on both sides
\begin{equation}\label{ladderpyth}
a^2 - b^2 = 30^2 - 25^2
\end{equation}

Now let $d_1$ and $d_2$ be the distances from the left wall to the meeting point of the two ladders and the distance from there to the right wall, $d_1+d_2=d$.

The two right triangles with legs $d_1$, $h$ and legs $d$, $a$ are similar, thus
\begin{equation}\label{leftladder}
\frac{d_1}{d} = \frac{h}{a}
\end{equation}
and also by the same argument for the other ladder
\begin{equation}\label{rightladder}
\frac{d_2}{d} = \frac{h}{b}
\end{equation}
Adding both sides of (\ref{leftladder}) and (\ref{rightladder}) gives
\[ \frac{d_1+d_2}{d} =\frac{h}{a} + \frac{h}{b}\]
or by using $d_1+d_2=d$, dividing by $h$ and exchanging sides it is
\[ \frac{1}{a} + \frac{1}{b} = \frac{1}{h} \]
Resolving for $b$ gives
\begin{equation}\label{ladderb}
b = \frac{ha}{a-h}
\end{equation}
Inserting (\ref{ladderb}) into equation (\ref{ladderpyth}) then gives
\[ a^2 - \frac{(ha)^2}{(a-h)^2} = 275 \]
and by the steps
\[ a^2 (a-h)^2 - h^2 a^2 = 275 (a-h)^2 \]
\[ a^2 (a^2-2ah+h^2) - h^2 a^2 = 275 (a^2-2ah+h^2) \]
\[ a^4  -2ha^3 +h^2a^2 - h^2 a^2 = 275 (a^2-2ah+h^2) \]
the quartic equation for $a$ (as $h$ is a known constant value)
\begin{equation}
a^4 -2ha^3 -275a^2 + 550ha - 275h^2 = 0
\end{equation}
Inserting the value of $h=\frac{504}{100}$ into this equation yields
\begin{equation}\label{ladderquartic}
a^4-\frac{252}{25}a^3-275 a^2+2772 a-\frac{174636}{25} = 0
\end{equation}

A quartic equation is still solvable in a closed form, see for example \cite{CRCTablesFormulae}, section 2.2 about polynomials, or \cite{AbrSteg}, section 3.8, but this is not a really practical way.

Alternatively you could look into the equations (\ref{ladderpyth1}) and (\ref{ladderpyth2}) and search for integer solutions. After some guessing you might deduce from $3^2+4^2=5^2$ that $(6 \cdot 3)^2+(6 \cdot 4)^2=(6 \cdot 5)^2$ and therefore $18^2 + 24^2 = 30^2$ and inserting 18 into (\ref{ladderquartic}) you see that you found a solution, then by extracting the linear factor $(a-18)$
\begin{displaymath}
\frac{1}{25} (a-18) (25 a^3 +198 a^2 -3311a +9702) = 0
\end{displaymath}

Or the equation (\ref{ladderquartic}) can be solved with computer help, either numerical or symbolic,
resulting in the only positive real solution $a=18$, a negative real and two conjugate complex solutions.

Only the positive real solution geometrically makes sense, and then
\begin{displaymath}
d = \sqrt{30^2-18^2} = \sqrt{900-324}=\sqrt{576}=24
\end{displaymath}
The walls are 24m apart.


%\subsection{Micropuzzle 60 -- A series of primes}


%\pagebreak[3]
%\newpage

\begin{thebibliography}{99}

\bibitem{AbrSteg}
M.~Abramowitz, I.~A.~Stegun, editors, {\it Handbook of Mathematical Functions.}
United States Government Printing Office, 1964.

\bibitem{Clessa}
J.~J.~Clessa, {\it Math and Logic Puzzles for PC Enthusiasts}.
Dover, 1996.

\bibitem{Cohen}
Henri Cohen, {\it A Course in Computational Algebraic Number Theory}.
Springer, 1996.

\bibitem{BookOfNumbers}
John H.~Conway, Richard K.~Guy, {\it The Book of Numbers}.
Copernicus, 1995.

\bibitem{Giblin}
Peter Giblin, {\it Primes and Programming -- An Introduction to Number Theory with Computing}.
Cambridge University Press, 1993.

%\bibitem{GraRy}
%I.~S.~Gradshteyn, I.~M.~Ryzhik, {\it Table of Integrals, Series and Products}, 7th Edition.
%Academic Press, 2007.

%\bibitem{ConcreteMath}
%Ronald L.~Graham, Donald E.~Knuth, Oren Patashnik, {\it Concrete Mathematics: A Foundation for Computer Science}, 2nd Edition.
%Addison-Wesley, 1994.

\bibitem{HardyWright}
G.~H.~Hardy, E.~M.~Wright, {\it An Introduction to the Theory of Numbers}, 5th Edition.
Oxford University Press, 1979.

%\bibitem{Nathanson}
%Melvyn B.~Nathanson, {\it Elementary Methods in Number Theory}.
%Springer, 2000.

%\bibitem{NISTHandbook}
%Frank W.~J.~Olver et al, {\it NIST Handbook of Mathematical Formulas}.
%Cambridge University Press, 2010.

\bibitem{Integer_sequences}
N.~J.~A.~Sloane, Simon Plouffe, {\it The Encyclopedia of Integer Sequences}, Academic Press, 1995.

\bibitem{CRCTablesFormulae}
D.~Zwillinger, Editor-in-Chief, {\it CRC Standard Mathematical Tables and Formulae}, 30th Edition.
CRC Press, 1996.

\end{thebibliography}
\end{document}
